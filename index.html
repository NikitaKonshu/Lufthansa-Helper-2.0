<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Flight Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg-1:#031022; --bg-2:#042633;
  --card:#0b2331;
  --text:#eaf4ff; --muted:rgba(234,244,255,0.56);
  --accent:#ffd54a; --accent2:#ffbf3a;
  --glass-border:rgba(255,255,255,0.04);
  --panel-radius:12px;
  font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  --ease: cubic-bezier(.16,.84,.35,1);
  font-size:15px;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  min-height:100vh;
  background:
    radial-gradient(800px 500px at 8% 8%, rgba(6,24,44,0.42), transparent 28%),
    linear-gradient(180deg,var(--bg-1),var(--bg-2));
  color:var(--text);
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
  padding:16px;
}
a{color:inherit;text-decoration:none}

/* layout */
.shell{max-width:1200px;margin:0 auto;border-radius:14px;overflow:hidden;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.03));border:1px solid var(--glass-border);box-shadow:0 28px 100px rgba(0,0,0,0.55)}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid rgba(255,255,255,0.02)}
.brand{display:flex;gap:12px;align-items:center}
.logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(180deg,#072b37,#051623);display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--accent)}
.title{font-weight:800}
.controls-row{display:flex;gap:10px;align-items:center}

/* main content grid */
.main{display:grid;grid-template-columns:360px 1fr;gap:16px;padding:16px}
@media(max-width:980px){ .main{grid-template-columns:1fr} }

/* left panel (compact) */
.panel{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.03));border-radius:var(--panel-radius);padding:14px;border:1px solid var(--glass-border);backdrop-filter: blur(6px)}
.left .panel + .panel{margin-top:12px}

/* focus area on top of main */
.hero{
  height:190px;border-radius:12px;background:
  linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.04));
  display:flex;gap:16px;align-items:center;padding:18px;border:1px solid var(--glass-border);position:relative;overflow:hidden;
}
.hero .info{flex:1}
.hero h2{font-size:18px;font-weight:800;margin-bottom:6px}
.hero p{color:var(--muted);font-size:13px;margin-bottom:8px}
.hero .stats{display:flex;gap:12px}
.stat{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02));padding:10px;border-radius:10px;border:1px solid var(--glass-border);min-width:90px;text-align:center}
.stat .num{font-weight:800;font-size:16px}
.hero .visual{width:160px;min-width:120px;height:120px;border-radius:10px;background:linear-gradient(135deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06));display:flex;align-items:center;justify-content:center;opacity:.9;}

/* improved clouds + subtle particles */
.clouds{position:absolute;right:-10%;top:-18%;width:520px;height:260px;opacity:0.12;filter:blur(10px);pointer-events:none}
.clouds svg{width:100%;height:100%;}

/* airlines area minimal list */
.airline-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;margin-top:12px}
@media(max-width:740px){ .airline-grid{grid-template-columns:repeat(1,minmax(0,1fr))} }

.airline{
  display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;background:transparent;border:1px solid rgba(255,255,255,0.02);
  transition: transform 300ms var(--ease), box-shadow 300ms var(--ease), background 300ms var(--ease);
}
.airline:hover{transform:translateY(-6px);box-shadow:0 18px 60px rgba(0,0,0,0.5)}
.airline .marker{width:12px;height:12px;border-radius:3px;background:var(--muted);flex:0 0 12px;opacity:0.9}
.airline .meta{display:flex;flex-direction:column}
.airline .meta .name{font-weight:700;font-size:14px}
.airline .meta .code{font-family:ui-monospace,monospace;color:var(--muted);font-size:12px}

/* minimal bottom of left: filters toggle for mobile */
.filter-toggle{display:none}
@media(max-width:980px){ .filter-toggle{display:inline-flex;margin-top:10px} }

/* right content: pages */
.content{display:flex;flex-direction:column;gap:14px}
.page{background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.03));border-radius:12px;padding:14px;border:1px solid var(--glass-border)}
.page h3{font-weight:800}

/* list items */
.row{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.02);background:transparent;margin-bottom:10px}
.row .left{min-width:0}
.row .title{font-weight:700}
.row .muted{color:var(--muted);font-size:13px}

/* filters slide panel (for fleet & routes) */
.filter-panel{
  position:fixed; right:16px; top:60px; width:320px; max-width:92vw; height:calc(100vh - 120px); background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.04)); border-radius:12px; padding:14px;border:1px solid var(--glass-border); box-shadow:0 40px 140px rgba(0,0,0,0.6); transform:translateY(8px); transition:opacity 260ms var(--ease), transform 260ms var(--ease); z-index:120;
  display:none;
}
.filter-panel.show{display:block;transform:none}

/* time intervals vertical list */
.time-list{display:flex;flex-direction:column;gap:8px;margin-top:12px}
.time-item{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);font-weight:700;background:transparent;cursor:pointer}
.time-item.selected{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#06141e;border-color:rgba(255,190,60,0.12)}

/* inputs */
.input{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);margin-top:8px}

/* modal backdrop (blocking) */
.modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.6);display:flex;align-items:center;justify-content:center;z-index:140}
.modal-card{width:min(720px,94%);border-radius:12px;padding:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.04));border:1px solid var(--glass-border)}

/* small screens adjustments */
@media(max-width:640px){
  .topbar{padding:10px}
  .logo{width:40px;height:40px}
  .hero{height:150px;padding:12px}
  .main{padding:8px}
  .left{order:2}
}
</style>
</head>
<body>

<div class="shell" role="application" aria-label="Flight Dashboard">

  <div class="topbar">
    <div class="brand">
      <div class="logo">FD</div>
      <div>
        <div class="title">Flight Dashboard</div>
      </div>
    </div>
    <div class="controls-row">
      <div style="color:var(--muted);font-weight:700;font-size:13px">Аккаунт</div>
    </div>
  </div>

  <div class="main">
    <!-- LEFT column -->
    <div class="left">
      <div class="panel hero" aria-hidden="false">
        <div class="info">
          <h2>Обзор</h2>
          <p>Краткая панель состояния. Никаких демо‑строк.</p>
          <div class="stats">
            <div class="stat"><div class="num" id="stat-airlines">—</div><div style="font-size:12px;color:var(--muted)">Авиакомпании</div></div>
            <div class="stat"><div class="num" id="stat-fleet">—</div><div style="font-size:12px;color:var(--muted)">Самолёты</div></div>
            <div class="stat"><div class="num" id="stat-active">—</div><div style="font-size:12px;color:var(--muted)">Активные рейсы</div></div>
          </div>
        </div>
        <div class="visual" aria-hidden="true">
          <!-- minimal graphic element -->
          <svg width="80" height="80" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="32" cy="32" r="30" stroke="rgba(255,255,255,0.04)"/>
            <path d="M10 44 L54 20" stroke="rgba(255,255,255,0.12)" stroke-width="2" stroke-linecap="round"/>
            <rect x="42" y="16" width="6" height="6" rx="1" fill="rgba(255,255,255,0.09)"/>
          </svg>
        </div>

        <div class="clouds" aria-hidden="true">
          <!-- improved clouds svg: multiple soft layers + subtle particle dots -->
          <svg viewBox="0 0 600 260" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice">
            <defs>
              <linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#fff" stop-opacity="0.18"/><stop offset="1" stop-color="#fff" stop-opacity="0.06"/></linearGradient>
              <filter id="f1" x="-20%" y="-20%" width="140%" height="140%">
                <feGaussianBlur stdDeviation="18" result="b"/>
                <feColorMatrix in="b" type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 0.6 0"/>
              </filter>
            </defs>

            <g filter="url(#f1)" fill="url(#g1)">
              <ellipse cx="120" cy="60" rx="130" ry="40"/>
              <ellipse cx="320" cy="40" rx="110" ry="34"/>
              <ellipse cx="460" cy="110" rx="160" ry="48"/>
            </g>

            <g fill="rgba(255,255,255,0.06)">
              <circle cx="80" cy="180" r="2.3"/><circle cx="140" cy="200" r="1.8"/><circle cx="220" cy="170" r="1.6"/>
              <circle cx="340" cy="190" r="2.0"/><circle cx="480" cy="150" r="1.7"/>
            </g>
          </svg>
        </div>
      </div>

      <div class="panel" aria-hidden="false">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div style="font-weight:800">Авиакомпании</div>
        </div>

        <div id="airGrid" class="airline-grid" aria-live="polite"></div>

      </div>
    </div>

    <!-- RIGHT column (content) -->
    <div class="content">

      <div id="page-routes" class="page" data-page="routes">
        <h3>Направления</h3>
        <div style="display:flex;gap:12px;align-items:center">
          <input id="routeSearch" class="input" placeholder="Поиск по коду или городу" aria-label="Поиск маршрутов"/>
          <button id="openFiltersRoutes" class="input" style="max-width:200px;text-align:center">Фильтры</button>
        </div>
        <div id="routesList" style="margin-top:12px"></div>
      </div>

      <div id="page-fleet" class="page" data-page="fleet">
        <h3>Флот</h3>
        <div style="display:flex;gap:12px;align-items:center">
          <input id="fleetSearch" class="input" placeholder="Поиск по типу или ID" aria-label="Поиск флота"/>
          <button id="openFiltersFleet" class="input" style="max-width:200px;text-align:center">Фильтры</button>
        </div>
        <div id="fleetList" style="margin-top:12px"></div>
      </div>

      <div id="page-flights" class="page" data-page="flights" style="display:none">
        <h3>Рейсы</h3>
        <div id="confirmedList" style="margin-top:12px"></div>
      </div>

    </div>
  </div>
</div>

<!-- FILTER PANEL (shared; content updated per context) -->
<div id="filterPanel" class="filter-panel" aria-hidden="true" role="dialog" aria-modal="true">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <div style="font-weight:800" id="filterTitle">Фильтры</div>
    <button id="closeFilters" style="background:transparent;border:0;color:var(--muted);font-weight:700;cursor:pointer">Закрыть</button>
  </div>

  <div style="margin-top:12px">
    <label style="font-weight:700;font-size:13px">Поиск авиакомпании</label>
    <input id="filterAirSearch" class="input" placeholder="Название или код"/>
  </div>

  <div style="margin-top:14px">
    <label style="font-weight:700;font-size:13px">Длительность (часы)</label>
    <div class="time-list" id="timeList">
      <!-- filled by JS -->
    </div>
  </div>

  <div style="margin-top:14px">
    <label style="font-weight:700;font-size:13px">Дополнительно</label>
    <input id="filterExtra" class="input" placeholder="Доп. фильтр (например ICAO)"/>
  </div>

</div>

<!-- blocking modal examples (login/confirm kept minimal) -->
<div id="modalBackdrop" class="modal-backdrop" style="display:none" aria-hidden="true">
  <div class="modal-card" role="document">
    <div style="font-weight:800;margin-bottom:8px">Войти</div>
    <input id="loginCall" class="input" placeholder="Позывной" />
    <input id="loginPass" class="input" type="password" placeholder="Пароль" style="margin-top:8px"/>
    <div style="display:flex;justify-content:flex-end;margin-top:12px"><button id="btnLogin" class="input">Войти</button></div>
  </div>
</div>

<script>
/* ---------- Data (airlines deduped, minimalistic metadata) ---------- */
const AIRLINES = [
  { name: "Swiss International Air Lines", code: "LX" },
  { name: "Austrian Airlines", code: "OS" },
  { name: "AirBaltic", code: "BT" },
  { name: "Brussels Airlines", code: "SN" },
  { name: "Eurowings", code: "EW" },
  { name: "Discover Airlines", code: "4Y" },
  { name: "Edelweiss Air", code: "WK" },
  { name: "Lufthansa Cargo", code: "G0" },
  { name: "Lufthansa CityLine", code: "CL" },
  { name: "Lufthansa City Airlines", code: "LC" },
  { name: "Lufthansa Technik", code: "LT" },
  { name: "Lufthansa Private Jet", code: "LP" },
  { name: "Air Dolomiti", code: "EN" },
  { name: "ITA Airways", code: "AZ" },
  { name: "Widerøe", code: "WF" },
  { name: "Norwegian Air Shuttle", code: "DY" },
  { name: "Finnair", code: "AY" },
  { name: "SAS Scandinavian Airlines", code: "SK" },
  { name: "Condor", code: "DE" },
  { name: "AeroLogic", code: "3S" },
  { name: "SunExpress", code: "XQ" }
];

/* Sample routes and fleet for demonstration (kept compact) */
const ROUTES = (function(){
  const base = ["EDDF","EGLL","LFPG","LEBL","LSZH","EHAM","EKCH"];
  const out = [];
  let id=1000;
  AIRLINES.forEach((a,ai)=>{
    for(let i=0;i<4;i++){
      out.push({
        id: `${a.code}-${id++}`,
        airline: a.name,
        airlineCode: a.code,
        fromICAO: base[(ai+i)%base.length],
        toICAO: base[(ai+i+2)%base.length],
        fromCity: 'City-'+base[(ai+i)%base.length],
        toCity: 'City-'+base[(ai+i+2)%base.length],
        durationMinutes: 60 + ((i+ai)%6)*30
      });
    }
  });
  return out;
})();

const FLEET = (function(){
  const types = ["A320","A321","B737","A220","A330"];
  const out = []; let id=1;
  AIRLINES.forEach((a,ai)=>{
    for(let i=0;i<2;i++){
      out.push({
        id: `${a.code}-AC${String(id).padStart(2,'0')}`,
        airline: a.name,
        type: types[(ai+i)%types.length],
        locationICAO: i===0? "EDDF": "EGLL",
        status: "idle",
        fuelMinutes: 420 + i*60
      });
      id++;
    }
  });
  return out;
})();

/* state */
let chosenTimeRange = null;
let filterAirQuery = "";
let pageContext = "routes"; // 'routes' or 'fleet'
let routeSearch = "";
let fleetSearch = "";

/* DOM refs */
const airGrid = document.getElementById('airGrid');
const routesList = document.getElementById('routesList');
const fleetList = document.getElementById('fleetList');
const timeListEl = document.getElementById('timeList');
const filterPanel = document.getElementById('filterPanel');
const filterTitle = document.getElementById('filterTitle');
const openFiltersRoutes = document.getElementById('openFiltersRoutes');
const openFiltersFleet = document.getElementById('openFiltersFleet');
const closeFiltersBtn = document.getElementById('closeFilters');
const filterAirSearch = document.getElementById('filterAirSearch');
const filterExtra = document.getElementById('filterExtra');
const routeSearchInput = document.getElementById('routeSearch');
const fleetSearchInput = document.getElementById('fleetSearch');
const statAirlines = document.getElementById('stat-airlines');
const statFleet = document.getElementById('stat-fleet');
const statActive = document.getElementById('stat-active');

/* helper: render airlines compact */
function renderAirlines(){
  airGrid.innerHTML = "";
  AIRLINES.forEach(a=>{
    const el = document.createElement('div');
    el.className = 'airline';
    el.innerHTML = `
      <div class="marker" aria-hidden="true"></div>
      <div class="meta">
        <div class="name">${a.name}</div>
        <div class="code">${a.code}</div>
      </div>
    `;
    airGrid.appendChild(el);
  });
  statAirlines.textContent = AIRLINES.length;
}

/* render routes list with current filters */
function renderRoutes(){
  routesList.innerHTML = "";
  const q = (routeSearch || "").trim().toLowerCase();
  const filtered = ROUTES.filter(r=>{
    if(filterAirQuery){ if(!r.airline.toLowerCase().includes(filterAirQuery) && !r.airlineCode.toLowerCase().includes(filterAirQuery)) return false; }
    if(chosenTimeRange){
      // chosenTimeRange is {min,max} or {min:600} for 10+
      if(chosenTimeRange.max){
        if(!(r.durationMinutes >= chosenTimeRange.min*60 && r.durationMinutes <= chosenTimeRange.max*60)) return false;
      } else {
        if(!(r.durationMinutes >= chosenTimeRange.min*60)) return false;
      }
    }
    if(q){
      if(!(
        r.fromICAO.toLowerCase().includes(q) ||
        r.toICAO.toLowerCase().includes(q) ||
        r.fromCity.toLowerCase().includes(q) ||
        r.toCity.toLowerCase().includes(q)
      )) return false;
    }
    return true;
  });
  if(!filtered.length){ routesList.innerHTML = '<div style="color:var(--muted)">Нет направлений</div>'; return; }
  filtered.forEach(r=>{
    const row = document.createElement('div');
    row.className = 'row';
    row.innerHTML = `<div class="left"><div class="title">${r.fromICAO} → ${r.toICAO} · ${r.airlineCode}</div><div class="muted">${r.fromCity} → ${r.toCity}</div></div><div style="text-align:right"><div class="muted">${Math.round(r.durationMinutes/60)} ч</div></div>`;
    routesList.appendChild(row);
  });
}

/* render fleet list */
function renderFleet(){
  fleetList.innerHTML = "";
  const q = (fleetSearch || "").trim().toLowerCase();
  const filtered = FLEET.filter(f=>{
    if(filterAirQuery){ if(!f.airline.toLowerCase().includes(filterAirQuery) && !f.id.toLowerCase().includes(filterAirQuery)) return false; }
    if(q){ if(!(f.id.toLowerCase().includes(q) || f.type.toLowerCase().includes(q) || f.locationICAO.toLowerCase().includes(q))) return false; }
    return true;
  });
  if(!filtered.length){ fleetList.innerHTML = '<div style="color:var(--muted)">Нет самолётов</div>'; return; }
  filtered.forEach(f=>{
    const row = document.createElement('div');
    row.className = 'row';
    row.innerHTML = `<div class="left"><div class="title">${f.id} · ${f.type}</div><div class="muted">${f.airline} · ${f.locationICAO}</div></div><div style="text-align:right"><div class="muted">${f.fuelMinutes} мин</div></div>`;
    fleetList.appendChild(row);
  });
  statFleet.textContent = FLEET.length;
}

/* build time items 1-2,3-4,...9-10,10+ */
function buildTimeList(){
  timeListEl.innerHTML = "";
  const ranges = [
    {label:"1–2 часа", min:1, max:2},
    {label:"3–4 часа", min:3, max:4},
    {label:"5–6 часов", min:5, max:6},
    {label:"7–8 часов", min:7, max:8},
    {label:"9–10 часов", min:9, max:10},
    {label:"10+ часов", min:10}
  ];
  ranges.forEach(r=>{
    const el = document.createElement('div');
    el.className = 'time-item';
    el.textContent = r.label;
    el.addEventListener('click', ()=>{
      // toggle
      if(chosenTimeRange && chosenTimeRange.label === r.label){ chosenTimeRange = null; el.classList.remove('selected'); }
      else {
        chosenTimeRange = r;
        // clear previous selection styling
        document.querySelectorAll('.time-item').forEach(x=>x.classList.remove('selected'));
        el.classList.add('selected');
      }
      renderRoutes();
    });
    timeListEl.appendChild(el);
  });
}

/* filter panel open/close, context aware */
function openFilterPanel(context){
  pageContext = context; // 'routes' or 'fleet'
  filterTitle.textContent = context === 'routes' ? 'Фильтры — Направления' : 'Фильтры — Флот';
  filterPanel.classList.add('show');
  filterPanel.style.display = 'block';
  filterAirSearch.value = filterAirQuery || "";
  filterExtra.value = "";
}
function closeFilterPanel(){
  filterPanel.classList.remove('show');
  filterPanel.style.display = 'none';
}

/* wire up filter inputs */
filterAirSearch.addEventListener('input', e=>{
  filterAirQuery = e.target.value.trim().toLowerCase();
  if(pageContext === 'routes') renderRoutes(); else renderFleet();
});
filterExtra.addEventListener('input', e=>{
  // reserved placeholder for other filters
});

/* open buttons */
openFiltersRoutes.addEventListener('click', ()=> openFilterPanel('routes'));
openFiltersFleet.addEventListener('click', ()=> openFilterPanel('fleet'));
closeFiltersBtn.addEventListener('click', closeFilterPanel);

/* search fields */
routeSearchInput.addEventListener('input', e=>{ routeSearch = e.target.value; renderRoutes(); });
fleetSearchInput.addEventListener('input', e=>{ fleetSearch = e.target.value; renderFleet(); });

/* init */
function init(){
  renderAirlines();
  buildTimeList();
  renderRoutes();
  renderFleet();
  statActive.textContent = 0;
}
init();

/* responsive: show/hide pages is handled by simple visibility */
document.querySelectorAll('[data-page]').forEach(p=>{
  // keep routes and fleet visible by default; hide others
  if(p.dataset.page !== 'routes' && p.dataset.page !== 'fleet') p.style.display = 'none';
});

/* small enhancements: keyboard close filter with Escape while filter open */
document.addEventListener('keydown', e=>{
  if(e.key === 'Escape' && filterPanel.classList.contains('show')){ closeFilterPanel(); }
});

/* ensure filter panel hides on outside clicks only if necessary (we keep blocking semantics) - here we keep it manual close */
</script>
</body>
</html>
